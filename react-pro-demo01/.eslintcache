[{"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\App.js":"1","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\index.js":"2","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\admin\\products\\List.js":"3","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\Login.js":"4","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\admin\\dashboard\\Index.js":"5","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\router\\index.js":"6","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\PageNotFound.js":"7","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\components\\Frame\\index.js":"8","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\admin\\products\\Edit.js":"9","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\utils\\auth.js":"10","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\utils\\request.js":"11","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\services\\auth.js":"12","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\services\\products.js":"13","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\welcome.js":"14","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\admin\\notices\\notices.js":"15","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\store\\reducers\\notices.js":"16","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\store\\reducers\\products.js":"17","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\store\\index.js":"18","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\store\\actions\\products.js":"19","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\config\\index.js":"20"},{"size":684,"mtime":1609918021385,"results":"21","hashOfConfig":"22"},{"size":966,"mtime":1610534680669,"results":"23","hashOfConfig":"22"},{"size":3717,"mtime":1610521193983,"results":"24","hashOfConfig":"22"},{"size":1314,"mtime":1610451798321,"results":"25","hashOfConfig":"22"},{"size":219,"mtime":1609815175109,"results":"26","hashOfConfig":"22"},{"size":1228,"mtime":1610350740715,"results":"27","hashOfConfig":"22"},{"size":231,"mtime":1609819160419,"results":"28","hashOfConfig":"22"},{"size":3637,"mtime":1610625753140,"results":"29","hashOfConfig":"22"},{"size":4291,"mtime":1610442607338,"results":"30","hashOfConfig":"22"},{"size":327,"mtime":1609920149123,"results":"31","hashOfConfig":"22"},{"size":971,"mtime":1610518980873,"results":"32","hashOfConfig":"22"},{"size":135,"mtime":1610007013772,"results":"33","hashOfConfig":"22"},{"size":745,"mtime":1610329286377,"results":"34","hashOfConfig":"22"},{"size":121,"mtime":1609990890728,"results":"35","hashOfConfig":"22"},{"size":829,"mtime":1610443852225,"results":"36","hashOfConfig":"22"},{"size":269,"mtime":1610443274497,"results":"37","hashOfConfig":"22"},{"size":382,"mtime":1610520574810,"results":"38","hashOfConfig":"22"},{"size":365,"mtime":1610444243783,"results":"39","hashOfConfig":"22"},{"size":391,"mtime":1610520563813,"results":"40","hashOfConfig":"22"},{"size":48,"mtime":1610348754252,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"16ucohv",{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"46"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"59"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"46"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"67"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\App.js",[],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\index.js",[],["89","90"],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\admin\\products\\List.js",["91","92","93","94"],"import React, { useEffect, useState } from 'react';\r\nimport { Card, Table, Button, Popconfirm, message } from 'antd'\r\nimport { productsListApi, productsDelApi, productsEditApi } from '../../../services/products'\r\nimport { serverUrl } from '../../../config'\r\nimport { connect } from 'react-redux'\r\nimport { loadProduct } from '../../../store/actions/products'\r\n\r\nconst List = (props) => {\r\n  console.log(props);\r\n  // const [list, setList] = useState([])\r\n  // const [total, setTotal] = useState(0)\r\n  // const [current, setPageNumber] = useState(1)\r\n  // const [pageSize, setPageSize] = useState(2)\r\n  let { current, list, total, pageSize } = props\r\n\r\n  useEffect(() => {\r\n    // getList()\r\n\r\n    props.dispatch(loadProduct({ current: 1, pageSize: 2 }))\r\n    return () => {\r\n      props.dispatch(loadProduct({ current: 1, pageSize: 2 }))\r\n\r\n    }\r\n\r\n  }, [current, pageSize])\r\n  // const getList = () => {\r\n  //   productsListApi({ per: pageSize, page: current }).then(res => {\r\n  //     // setTotal(res.data.totalCount)\r\n  //     // setList(res.data.products)\r\n  //   })\r\n  // }\r\n  const deleteProduct = (id) => {\r\n    productsDelApi(id).then(() => props.dispatch(loadProduct({ current, pageSize })))\r\n  }\r\n  const changeSale = (recode) => {\r\n    productsEditApi(recode._id, { onSale: !recode.onSale }).then(() => {\r\n      message.destroy()\r\n      message.success(recode.onSale ? '下架成功！' : '上架成功！')\r\n      props.dispatch(loadProduct({ current, pageSize }))\r\n    })\r\n  }\r\n  const pageChange = (page, pageSize) => {\r\n    // setPageNumber(page)\r\n    props.dispatch(loadProduct({ current: page, pageSize }))\r\n  }\r\n  const sizeChange = (page, pageSize) => {\r\n    // setPageSize(pageSize)\r\n    props.dispatch(loadProduct({ current: page, pageSize }))\r\n  }\r\n\r\n  const columns = [\r\n    { title: '序号', align: 'center', key: '_id', width: 80, render: (text, record, index) => (current - 1) * pageSize + index + 1 },\r\n    { title: '名字', align: 'center', dataIndex: 'name' },\r\n    { title: '价格', align: 'center', dataIndex: 'price' },\r\n    { title: '图片', align: 'center', render: (recode) => (recode.coverImg ? <img style={{ width: '160px' }} src={recode.coverImg} alt='主图' /> : '暂无图片') },\r\n    { title: '说明', align: 'center', render: (recode) => (recode.descriptions || '无') },\r\n    { title: '是否在售', align: 'center', render: (recode) => (recode.onSale ? '在售' : '已下架') },\r\n    {\r\n      title: '操作', align: 'center', render: (text, record, index) => (\r\n        <div>\r\n          <Button type='primary' size='small' onClick={() => props.history.push(`/admin/products/edit/${record._id}`)}>修改</Button>\r\n          <Popconfirm\r\n            title=\"是否删除?\"\r\n            onConfirm={() => deleteProduct(record._id)}\r\n            onCancel={() => { }}\r\n            okText=\"Yes\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button style={{ margin: '0 1rem' }} type='danger' size='small'>删除</Button>\r\n          </Popconfirm>\r\n          <Button size='small' onClick={() => changeSale(record)}>{record.onSale ? '下架' : '上架'}</Button>\r\n        </div>\r\n      )\r\n    }\r\n  ]\r\n  return (\r\n    <Card\r\n      title='商品列表'\r\n      extra={\r\n        <Button\r\n          type='primary'\r\n          size='small'\r\n          onClick={() => props.history.push('/admin/products/edit')}>\r\n          添加商品\r\n        </Button>}>\r\n      <Table rowKey=\"_id\" columns={columns} bordered dataSource={list} pagination={{ current, total, pageSize, showSizeChanger: true, pageSizeOptions: [2, 3, 4], onChange: pageChange, onShowSizeChange: sizeChange }}  >\r\n      </Table>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default connect(state => state.products)(List);","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\Login.js",[],["95","96"],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\admin\\dashboard\\Index.js",[],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\router\\index.js",["97","98"],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\PageNotFound.js",[],["99","100"],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\components\\Frame\\index.js",["101","102"],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\admin\\products\\Edit.js",["103"],"import { Button, Card, Col, Form, Input, Row, Upload } from 'antd';\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { serverUrl } from '../../../config'\r\nimport { productsAddApi, productsInfoApi, productsEditApi } from '../../../services/products'\r\n\r\nimport BraftEditor from 'braft-editor'\r\n// 引入编辑器样式\r\nimport 'braft-editor/dist/index.css'\r\n\r\nconst Edit = (props) => {\r\n  const [form] = Form.useForm()\r\n  const [imageUrl, setImageUrl] = useState(null)\r\n  const [loading, setLoading] = useState(false)\r\n  const [editorState, setEditorState] = useState(BraftEditor.createEditorState(null))\r\n\r\n\r\n  function onFinish(value) {\r\n    let data = { ...value, coverImg: imageUrl, descriptions: editorState.toHTML() }\r\n    console.log(data);\r\n    if (props.match.params.id) {\r\n      productsEditApi(props.match.params.id, data).then(res => {\r\n        props.history.push('/admin/products')\r\n      })\r\n    } else {\r\n      productsAddApi(data).then(res => {\r\n        props.history.push('/admin/products')\r\n      })\r\n    }\r\n  }\r\n\r\n  const formLayout = {\r\n    labelCol: { span: 4 },\r\n    wrapperCol: { span: 10, offset: 1 }\r\n  }\r\n  const checkPrice = (_, value) => {\r\n    if (!value) {\r\n      return Promise.reject('请输入价格!');\r\n    }\r\n    if (value > 1000) {\r\n      return Promise.reject('价格太高!');\r\n    }\r\n    return Promise.resolve()\r\n  }\r\n  function checkDes() {\r\n    console.log(editorState.toHTML());\r\n    if (editorState.toHTML().length < 10) {\r\n      return Promise.reject('必填!');\r\n    }\r\n    return Promise.resolve()\r\n  }\r\n  const rules = {\r\n    name: [{ required: true, message: '请输入名称' }],\r\n    price: [{ required: true, validator: checkPrice }],\r\n    coverImg: [{ required: true, message: '必填项' }],\r\n    descriptions: [{ required: true, validator: checkDes }],\r\n\r\n  }\r\n  useEffect(() => {\r\n    if (props.match.params.id) {\r\n      productsInfoApi(props.match.params.id).then(res => {\r\n        form.setFieldsValue({ ...res.data })\r\n        setImageUrl(res.data.coverImg)\r\n        setEditorState(BraftEditor.createEditorState(res.data.descriptions))\r\n      })\r\n    }\r\n  }, [])\r\n\r\n  const handleChange = (info) => {\r\n    if (info.file.status === 'uploading') {\r\n      setLoading(true)\r\n      return;\r\n    }\r\n    if (info.file.status === 'done') {\r\n      setLoading(false)\r\n      setImageUrl(serverUrl + info.file.response.info)\r\n    }\r\n  }\r\n\r\n  const uploadButton = (\r\n    <div>\r\n      {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n      <div style={{ marginTop: 8 }}>Upload</div>\r\n    </div>\r\n  );\r\n\r\n  function handleEditorChange(value) {\r\n    setEditorState(value)\r\n  }\r\n  return (\r\n    <Card title='编辑' extra={<Button type='default' onClick={() => props.history.push('/admin/products')}>返回</Button>}>\r\n\r\n      <Form form={form} name='base' {...formLayout} onFinish={onFinish}>\r\n        <Form.Item label=\"名称\" name='name' rules={rules.name}>\r\n          <Input></Input>\r\n        </Form.Item>\r\n        <Form.Item label=\"价格\" name='price' rules={rules.price}>\r\n          <Input></Input>\r\n        </Form.Item>\r\n\r\n        <Form.Item label='图片' name='coverImg' rules={rules.coverImg} >\r\n          <Form.Item>\r\n            <Upload\r\n              name=\"file\"\r\n              listType=\"picture-card\"\r\n              className=\"avatar-uploader\"\r\n              showUploadList={false}\r\n              action={`${serverUrl}/api/v1/common/file_upload`}\r\n              onChange={handleChange}\r\n            >\r\n              {imageUrl ? <img src={imageUrl} alt=\"avatar\" style={{ width: '100%' }} /> : uploadButton}\r\n            </Upload>\r\n          </Form.Item>\r\n        </Form.Item>\r\n\r\n        <Form.Item label='介绍' name='descriptions' rules={rules.descriptions}>\r\n          <div className=\"my-component\">\r\n            <BraftEditor\r\n              value={editorState}\r\n              onChange={handleEditorChange}\r\n            />\r\n          </div>\r\n        </Form.Item>\r\n\r\n        <Form.Item wrapperCol={{ offset: 5 }}>\r\n          <Row>\r\n            <Col span={3}>\r\n              <Button type='primary' htmlType=\"submit\">确认</Button>\r\n            </Col>\r\n          </Row>\r\n        </Form.Item>\r\n      </Form>\r\n    </Card>\r\n\r\n  );\r\n}\r\n\r\nexport default Edit;","D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\utils\\auth.js",[],["104","105"],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\utils\\request.js",[],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\services\\auth.js",[],["106","107"],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\services\\products.js",[],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\welcome.js",[],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\pages\\admin\\notices\\notices.js",[],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\store\\reducers\\notices.js",[],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\store\\reducers\\products.js",[],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\store\\index.js",[],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\store\\actions\\products.js",[],"D:\\学习\\React\\react项目\\react-pro-demo01\\src\\config\\index.js",[],{"ruleId":"108","replacedBy":"109"},{"ruleId":"110","replacedBy":"111"},{"ruleId":"112","severity":1,"message":"113","line":1,"column":28,"nodeType":"114","messageId":"115","endLine":1,"endColumn":36},{"ruleId":"112","severity":1,"message":"116","line":3,"column":10,"nodeType":"114","messageId":"115","endLine":3,"endColumn":25},{"ruleId":"112","severity":1,"message":"117","line":4,"column":10,"nodeType":"114","messageId":"115","endLine":4,"endColumn":19},{"ruleId":"118","severity":1,"message":"119","line":25,"column":6,"nodeType":"120","endLine":25,"endColumn":25,"suggestions":"121"},{"ruleId":"108","replacedBy":"122"},{"ruleId":"110","replacedBy":"123"},{"ruleId":"112","severity":1,"message":"124","line":8,"column":42,"nodeType":"114","messageId":"115","endLine":8,"endColumn":57},{"ruleId":"112","severity":1,"message":"125","line":9,"column":10,"nodeType":"114","messageId":"115","endLine":9,"endColumn":22},{"ruleId":"108","replacedBy":"126"},{"ruleId":"110","replacedBy":"127"},{"ruleId":"112","severity":1,"message":"128","line":1,"column":17,"nodeType":"114","messageId":"115","endLine":1,"endColumn":26},{"ruleId":"112","severity":1,"message":"113","line":1,"column":28,"nodeType":"114","messageId":"115","endLine":1,"endColumn":36},{"ruleId":"118","severity":1,"message":"129","line":67,"column":6,"nodeType":"120","endLine":67,"endColumn":8,"suggestions":"130"},{"ruleId":"108","replacedBy":"131"},{"ruleId":"110","replacedBy":"132"},{"ruleId":"108","replacedBy":"133"},{"ruleId":"110","replacedBy":"134"},"no-native-reassign",["135"],"no-negated-in-lhs",["136"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'productsListApi' is defined but never used.","'serverUrl' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.","ArrayExpression",["137"],["135"],["136"],"'SettingOutlined' is defined but never used.","'FormProvider' is defined but never used.",["135"],["136"],"'useEffect' is defined but never used.","React Hook useEffect has missing dependencies: 'form' and 'props.match.params.id'. Either include them or remove the dependency array.",["138"],["135"],["136"],["135"],["136"],"no-global-assign","no-unsafe-negation",{"desc":"139","fix":"140"},{"desc":"141","fix":"142"},"Update the dependencies array to be: [current, pageSize, props]",{"range":"143","text":"144"},"Update the dependencies array to be: [form, props.match.params.id]",{"range":"145","text":"146"},[855,874],"[current, pageSize, props]",[2144,2146],"[form, props.match.params.id]"]